$(eval $(call addlib_s,libukdebug,$(CONFIG_LIBUKDEBUG)))
$(eval $(call addlib_paramprefix,libukdebug,debug))

CINCLUDES-$(CONFIG_LIBUKDEBUG)   += -I$(LIBUKDEBUG_BASE)/include
CXXINCLUDES-$(CONFIG_LIBUKDEBUG) += -I$(LIBUKDEBUG_BASE)/include

CINCLUDES-$(CONFIG_LIBUKDEBUG_CRASH_SCREEN)   += -I$(LIBUKDEBUG_BASE)/arch/$(CONFIG_UK_ARCH)/include
CXXINCLUDES-$(CONFIG_LIBUKDEBUG_CRASH_SCREEN) += -I$(LIBUKDEBUG_BASE)/arch/$(CONFIG_UK_ARCH)/include

LIBUKDEBUG_CINCLUDES-y  += -I$(LIBUKDEBUG_BASE)

LIBUKDEBUG_SRCS-$(CONFIG_LIBUKDEBUG_GDBSTUB) += $(LIBUKDEBUG_BASE)/gdbstub.c|isr
LIBUKDEBUG_SRCS-$(CONFIG_LIBUKDEBUG_GDBSTUB) += $(LIBUKDEBUG_BASE)/gdbtargetxml.ld
LIBUKDEBUG_SRCS-$(CONFIG_LIBUKDEBUG_GDBSTUB) += $(LIBUKDEBUG_BASE)/gdbtargetxml.S
LIBUKDEBUG_GDBTARGETXML_CDEPS += $(LIBUKDEBUG_BASE)/arch/$(CONFIG_UK_ARCH)/target.xml
LIBUKDEBUG_SRCS-$(CONFIG_LIBUKDEBUG_GDBSTUB) += $(LIBUKDEBUG_BASE)/arch/$(CONFIG_UK_ARCH)/gdbsup.c|isr

LIBUKDEBUG_SRCS-$(CONFIG_LIBUKDEBUG_CRASH_SCREEN) += $(LIBUKDEBUG_BASE)/arch/$(CONFIG_UK_ARCH)/crashsup.c
LIBUKDEBUG_SRCS-$(CONFIG_LIBUKDEBUG_CRASH_SCREEN) += $(LIBUKDEBUG_BASE)/arch/$(CONFIG_UK_ARCH)/dumpsup.c
LIBUKDEBUG_SRCS-$(CONFIG_LIBUKDEBUG_CRASH_SCREEN) += $(LIBUKDEBUG_BASE)/crashdump.c

LIBUKDEBUG_SRCS-y += $(LIBUKDEBUG_BASE)/crash.c # FIXME conditional?

# TODO Remove as soon as plat dependencies go away
LIBUKDEBUG_CINCLUDES-y  += -I$(UK_PLAT_COMMON_BASE)/include

LIBUKDEBUG_SRCS-$(CONFIG_LIBUKDEBUG_TRACEPOINTS) += $(LIBUKDEBUG_BASE)/trace.c
LIBUKDEBUG_SRCS-$(CONFIG_LIBUKDEBUG_TRACEPOINTS) += $(LIBUKDEBUG_BASE)/trace.ld

SECT_STRIP_FLAGS-$(CONFIG_LIBUKDEBUG_TRACEPOINTS) += -R .uk_tracepoints_list -R .uk_trace_keyvals
